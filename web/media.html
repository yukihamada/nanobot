<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>AIãƒ¡ãƒ‡ã‚£ã‚¢ç”Ÿæˆ - chatweb.ai</title>
    <meta name="description" content="ç”»åƒãƒ»éŸ³å£°ãƒ»å‹•ç”»ã‚’ç°¡å˜ã«ç”Ÿæˆã€‚DALL-E 3ã€Fluxã€Qwen3 TTSã€Kling AIã‚’çµ±åˆã—ãŸãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«API">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='8' fill='%236366f1'/%3E%3Ctext x='16' y='22' text-anchor='middle' font-size='18' font-weight='800' font-family='sans-serif' fill='white'%3Ecw%3C/text%3E%3C/svg%3E">
    <meta name="theme-color" content="#6366f1">
    <style>
        :root {
            --bg: #09090b;
            --surface: #18181b;
            --surface2: #1e1e24;
            --border: #27272a;
            --text: #fafafa;
            --muted: #71717a;
            --accent: #6366f1;
            --accent-hover: #818cf8;
            --accent-glow: rgba(99,102,241,0.25);
            --green: #22c55e;
            --red: #ef4444;
            --yellow: #eab308;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Hiragino Sans', 'Noto Sans JP', 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animations */
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Nav */
        nav {
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
        }
        .logo {
            font-size: 20px;
            font-weight: 800;
            letter-spacing: -0.5px;
            text-decoration: none;
            color: var(--text);
        }
        .logo span {
            background: linear-gradient(135deg, var(--accent), #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Main */
        .main {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 24px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 48px;
            animation: fadeUp 0.6s ease-out;
        }
        .header h1 {
            font-size: 42px;
            font-weight: 900;
            letter-spacing: -1.5px;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #fff 0%, #a5a5ff 50%, #fff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .header p {
            color: var(--muted);
            font-size: 17px;
            line-height: 1.6;
        }

        /* Info Box */
        .info-box {
            background: var(--surface);
            border: 1px solid var(--border);
            border-left: 4px solid var(--accent);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            animation: fadeUp 0.6s ease-out 0.1s both;
        }
        .info-box h3 {
            color: var(--accent);
            font-size: 16px;
            margin-bottom: 12px;
            font-weight: 700;
        }
        .info-box p {
            color: var(--muted);
            line-height: 1.8;
            font-size: 14px;
        }
        .info-box code {
            background: var(--surface2);
            color: var(--accent);
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 13px;
        }
        .info-box a {
            color: var(--accent);
            text-decoration: none;
            font-weight: 600;
        }
        .info-box a:hover {
            text-decoration: underline;
        }

        /* Card */
        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 24px;
            transition: transform 0.3s, border-color 0.3s;
            animation: fadeUp 0.6s ease-out both;
        }
        .card:nth-child(3) { animation-delay: 0.1s; }
        .card:nth-child(4) { animation-delay: 0.2s; }
        .card:nth-child(5) { animation-delay: 0.3s; }
        .card:nth-child(6) { animation-delay: 0.4s; }
        .card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }
        .card-icon {
            font-size: 40px;
            margin-right: 16px;
        }
        .card-title h2 {
            font-size: 22px;
            color: var(--text);
            margin-bottom: 4px;
            font-weight: 700;
        }
        .card-title p {
            color: var(--muted);
            font-size: 14px;
        }

        /* Form */
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 8px;
            font-size: 14px;
        }
        .label-badge {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            margin-left: 8px;
            font-weight: 600;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px 16px;
            background: var(--surface2);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 15px;
            font-family: inherit;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }
        textarea {
            resize: vertical;
            min-height: 100px;
            line-height: 1.6;
        }
        input::placeholder, textarea::placeholder {
            color: var(--muted);
        }

        /* Token input */
        .token-input {
            position: relative;
        }
        .token-toggle {
            position: absolute;
            right: 14px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 20px;
            width: auto;
            padding: 5px;
            opacity: 0.6;
            transition: opacity 0.2s;
        }
        .token-toggle:hover {
            opacity: 1;
        }

        /* Sample prompts */
        .sample-prompts {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        .sample-prompt {
            background: var(--surface2);
            border: 1px solid var(--border);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }
        .sample-prompt:hover {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
            transform: translateY(-1px);
        }

        /* Button */
        button {
            width: 100%;
            background: linear-gradient(135deg, var(--accent), #7c3aed);
            color: white;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 20px var(--accent-glow);
        }
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px var(--accent-glow);
        }
        button:active:not(:disabled) {
            transform: translateY(0);
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: inline-block;
            width: 14px;
            height: 14px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: 8px;
            vertical-align: middle;
        }

        /* Result */
        .result {
            margin-top: 24px;
            padding: 20px;
            border-radius: 12px;
            background: var(--surface2);
            border: 1px solid var(--border);
            animation: fadeUp 0.3s ease-out;
        }
        .result.success {
            border-left: 4px solid var(--green);
        }
        .result.error {
            border-left: 4px solid var(--red);
        }
        .result strong {
            display: block;
            margin-bottom: 12px;
            font-size: 15px;
        }
        .result-content {
            margin-top: 15px;
            color: var(--muted);
        }

        /* Generated image */
        .generated-image {
            width: 100%;
            border-radius: 12px;
            margin-top: 16px;
            border: 1px solid var(--border);
        }

        /* Audio */
        audio {
            width: 100%;
            margin-top: 16px;
            border-radius: 8px;
        }

        /* Download button */
        .download-btn {
            display: inline-block;
            margin-top: 16px;
            padding: 10px 20px;
            background: var(--green);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.2s;
        }
        .download-btn:hover {
            background: #16a34a;
            transform: translateY(-1px);
        }

        /* Credits info */
        .credits-info {
            display: inline-block;
            background: var(--surface2);
            border: 1px solid var(--border);
            color: var(--yellow);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
            margin-top: 8px;
            font-weight: 600;
        }

        /* Mobile */
        @media (max-width: 768px) {
            body {
                padding-bottom: env(safe-area-inset-bottom);
            }
            .main {
                padding: 24px 16px;
            }
            .header h1 {
                font-size: 32px;
            }
            .card {
                padding: 20px;
            }
            .card-icon {
                font-size: 32px;
            }
            .card-title h2 {
                font-size: 19px;
            }
        }
    </style>
</head>
<body>
    <nav>
        <a href="/" class="logo"><span>chatweb.ai</span></a>
        <div style="font-size: 14px; color: var(--muted);">Media API</div>
    </nav>

    <div class="main">
        <div class="header">
            <h1>ğŸ¨ AIãƒ¡ãƒ‡ã‚£ã‚¢ç”Ÿæˆ</h1>
            <p>ç”»åƒãƒ»éŸ³å£°ãƒ»å‹•ç”»ã‚’ç°¡å˜ã«ä½œæˆ</p>
        </div>

        <div class="info-box">
            <h3>ğŸ“– ä½¿ã„æ–¹</h3>
            <p>
                <strong>1.</strong> <a href="https://chatweb.ai" target="_blank">chatweb.ai</a> ã«ãƒ­ã‚°ã‚¤ãƒ³<br>
                <strong>2.</strong> é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ« (F12) â†’ Console ã§ <code>localStorage.getItem('auth_token')</code> ã‚’å®Ÿè¡Œ<br>
                <strong>3.</strong> å–å¾—ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¸‹ã®ã€Œèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã€æ¬„ã«è²¼ã‚Šä»˜ã‘<br>
                <strong>4.</strong> å¥½ããªãƒ¡ãƒ‡ã‚£ã‚¢ã‚’ç”Ÿæˆï¼
            </p>
        </div>

        <!-- Token -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸ”‘</div>
                <div class="card-title">
                    <h2>èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³</h2>
                    <p>ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«å–å¾—ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥åŠ›</p>
                </div>
            </div>
            <div class="form-group token-input">
                <input type="password" id="authToken" placeholder="Bearer token ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„">
                <button type="button" class="token-toggle" onclick="toggleTokenVisibility()">ğŸ‘ï¸</button>
            </div>
        </div>

        <!-- TTS -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸ”Š</div>
                <div class="card-title">
                    <h2>éŸ³å£°ç”Ÿæˆ</h2>
                    <p>ãƒ†ã‚­ã‚¹ãƒˆã‚’è‡ªç„¶ãªéŸ³å£°ã«å¤‰æ›</p>
                </div>
            </div>

            <div class="form-group">
                <label>ãƒ†ã‚­ã‚¹ãƒˆ</label>
                <textarea id="ttsText" placeholder="ä¾‹: ã“ã‚“ã«ã¡ã¯ã€ä»Šæ—¥ã¯ã„ã„å¤©æ°—ã§ã™ã­">ã“ã‚“ã«ã¡ã¯ã€ã“ã‚Œã¯AIéŸ³å£°ç”Ÿæˆã®ãƒ†ã‚¹ãƒˆã§ã™ã€‚è‡ªç„¶ãªæ—¥æœ¬èªã§èª­ã¿ä¸Šã’ã¾ã™ã€‚</textarea>
                <div class="sample-prompts">
                    <div class="sample-prompt" onclick="setTTSText('ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ã€‚ä»Šæ—¥ã‚‚è‰¯ã„ä¸€æ—¥ã‚’ãŠéã”ã—ãã ã•ã„ã€‚')">ãŠã¯ã‚ˆã†æŒ¨æ‹¶</div>
                    <div class="sample-prompt" onclick="setTTSText('ã”æ³¨æ–‡ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚å•†å“ã¯3å–¶æ¥­æ—¥ä»¥å†…ã«ç™ºé€ã„ãŸã—ã¾ã™ã€‚')">ãƒ“ã‚¸ãƒã‚¹</div>
                    <div class="sample-prompt" onclick="setTTSText('ã“ã‚“ã«ã¡ã¯ï¼ä»Šæ—¥ã¯ä½•ã‚’ã—ã¦éŠã¼ã†ã‹ãªï¼Ÿ')">å­ä¾›å‘ã‘</div>
                </div>
            </div>

            <div class="form-group">
                <label>éŸ³å£° <span class="label-badge">è‡ªå‹•é¸æŠ</span></label>
                <select id="ttsVoice">
                    <option value="Kazuha">Kazuha (æ—¥æœ¬èªãƒ»å¥³æ€§ãƒ»Polly) æ¨å¥¨</option>
                    <option value="Takumi">Takumi (æ—¥æœ¬èªãƒ»ç”·æ€§ãƒ»Polly)</option>
                    <option value="Mizuki">Mizuki (æ—¥æœ¬èªãƒ»å¥³æ€§ãƒ»Polly)</option>
                    <option value="female_calm">Female Calm (æ—¥æœ¬èªãƒ»å¥³æ€§ãƒ»Qwen3)</option>
                    <option value="male_calm">Male Calm (æ—¥æœ¬èªãƒ»ç”·æ€§ãƒ»Qwen3)</option>
                    <option value="nova">Nova (è‹±èªãƒ»å¥³æ€§ãƒ»OpenAI)</option>
                    <option value="alloy">Alloy (è‹±èªãƒ»OpenAI)</option>
                </select>
                <div class="credits-info">ğŸ’° ç´„ 1 credit / 100æ–‡å­—</div>
            </div>

            <button onclick="generateTTS()" id="ttsBtn">ğŸ”Š éŸ³å£°ã‚’ç”Ÿæˆ</button>
            <div id="ttsResult"></div>
        </div>

        <!-- Image -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸ–¼ï¸</div>
                <div class="card-title">
                    <h2>ç”»åƒç”Ÿæˆ</h2>
                    <p>ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ç¾ã—ã„ç”»åƒã‚’ä½œæˆ</p>
                </div>
            </div>

            <div class="form-group">
                <label>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</label>
                <textarea id="imagePrompt" placeholder="ä¾‹: é›ªã®ä¸­ã«åº§ã£ã¦ã„ã‚‹å¯æ„›ã„çŒ«">é›ªã®ä¸­ã«åº§ã£ã¦ã„ã‚‹å¯æ„›ã„çŒ«ã€æœˆå…‰ã®ä¸‹ã€ã‚·ãƒãƒãƒ†ã‚£ãƒƒã‚¯ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã€4Kå“è³ªã€ãƒ•ã‚©ãƒˆãƒªã‚¢ãƒ«</textarea>
                <div class="sample-prompts">
                    <div class="sample-prompt" onclick="setImagePrompt('ç¾ã—ã„æ—¥æœ¬åº­åœ’ã€æ¡œãŒæº€é–‹ã€æ˜¥ã®æœã€æŸ”ã‚‰ã‹ã„å…‰')">æ—¥æœ¬åº­åœ’</div>
                    <div class="sample-prompt" onclick="setImagePrompt('æœªæ¥éƒ½å¸‚ã®å¤œæ™¯ã€ãƒã‚ªãƒ³ãƒ©ã‚¤ãƒˆã€ã‚µã‚¤ãƒãƒ¼ãƒ‘ãƒ³ã‚¯')">æœªæ¥éƒ½å¸‚</div>
                    <div class="sample-prompt" onclick="setImagePrompt('å®‡å®™é£›è¡Œå£«ãŒæœˆé¢ã‚’æ­©ãã€åœ°çƒãŒè¦‹ãˆã‚‹ã€ãƒªã‚¢ãƒ«')">å®‡å®™</div>
                    <div class="sample-prompt" onclick="setImagePrompt('å¯æ„›ã„æŸ´çŠ¬ã®å­çŠ¬ã€è‰åŸã§éŠã¶ã€æ™´å¤©')">æŸ´çŠ¬</div>
                </div>
            </div>

            <div class="form-group">
                <label>ãƒ¢ãƒ‡ãƒ« <span class="label-badge">å“è³ªã¨é€Ÿåº¦</span></label>
                <select id="imageModel" onchange="updateImageCredits()">
                    <option value="flux-schnell">Flux Schnell (é«˜é€Ÿ) æ¨å¥¨</option>
                    <option value="flux-pro">Flux Pro (æœ€é«˜å“è³ª)</option>
                    <option value="flux-realism">Flux Realism (è¶…ãƒªã‚¢ãƒ«)</option>
                </select>
            </div>

            <div class="form-group">
                <label>ã‚µã‚¤ã‚º</label>
                <select id="imageSize">
                    <option value="1024x1024">æ­£æ–¹å½¢ (1024Ã—1024)</option>
                    <option value="1792x1024">æ¨ªé•· (1792Ã—1024)</option>
                    <option value="1024x1792">ç¸¦é•· (1024Ã—1792)</option>
                </select>
                <div class="credits-info" id="imageCredits">ğŸ’° 5 credits</div>
            </div>

            <button onclick="generateImage()" id="imageBtn">ğŸ–¼ï¸ ç”»åƒã‚’ç”Ÿæˆ</button>
            <div id="imageResult"></div>
        </div>

        <!-- Music & Sound Effects -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸµ</div>
                <div class="card-title">
                    <h2>éŸ³æ¥½ãƒ»åŠ¹æœéŸ³ç”Ÿæˆ</h2>
                    <p>ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰éŸ³æ¥½ã‚„åŠ¹æœéŸ³ã‚’ä½œæˆ</p>
                </div>
            </div>

            <div class="form-group">
                <label>ã‚¿ã‚¤ãƒ—</label>
                <select id="audioType" onchange="updateAudioPrompts()">
                    <option value="music">éŸ³æ¥½</option>
                    <option value="sfx">åŠ¹æœéŸ³</option>
                </select>
            </div>

            <div class="form-group">
                <label>èª¬æ˜</label>
                <textarea id="audioPrompt" placeholder="ä¾‹: æ˜ã‚‹ã„ãƒ”ã‚¢ãƒæ›²ã€Lo-fi ãƒ’ãƒƒãƒ—ãƒ›ãƒƒãƒ—">ã‚¢ã‚³ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚®ã‚¿ãƒ¼ã‚’ä½¿ã£ãŸç©ã‚„ã‹ãªã‚«ãƒ•ã‚§ãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯ã€Lo-fiã€ãƒªãƒ©ãƒƒã‚¯ã‚¹</textarea>
                <div class="sample-prompts" id="audioSamples">
                    <div class="sample-prompt" onclick="setAudioPrompt('ã‚¢ã‚³ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚®ã‚¿ãƒ¼ã‚’ä½¿ã£ãŸç©ã‚„ã‹ãªã‚«ãƒ•ã‚§ãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯ã€Lo-fiã€ãƒªãƒ©ãƒƒã‚¯ã‚¹')">ã‚«ãƒ•ã‚§BGM</div>
                    <div class="sample-prompt" onclick="setAudioPrompt('ã‚¢ãƒƒãƒ—ãƒ†ãƒ³ãƒãªã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ãƒ‹ãƒƒã‚¯ãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯ã€EDMã€ã‚¨ãƒãƒ«ã‚®ãƒƒã‚·ãƒ¥')">EDM</div>
                    <div class="sample-prompt" onclick="setAudioPrompt('ãƒ”ã‚¢ãƒã‚½ãƒ­ã€æ„Ÿå‹•çš„ã€æ˜ ç”»ã®ã‚ˆã†ãªã€ã‚†ã£ãã‚Š')">æ„Ÿå‹•ãƒ”ã‚¢ãƒ</div>
                    <div class="sample-prompt" onclick="setAudioPrompt('ã‚¸ãƒ£ã‚ºãƒˆãƒªã‚ªã€ã‚µãƒƒã‚¯ã‚¹ã€å¤œã®ãƒãƒ¼ã€ã‚¹ãƒ ãƒ¼ã‚º')">ã‚¸ãƒ£ã‚º</div>
                </div>
            </div>

            <div class="form-group">
                <label>é•·ã•</label>
                <select id="audioDuration" onchange="updateAudioCredits()">
                    <option value="10">10ç§’ æ¨å¥¨</option>
                    <option value="30">30ç§’</option>
                    <option value="60">60ç§’</option>
                </select>
                <div class="credits-info" id="audioCredits">ğŸ’° 30 credits</div>
            </div>

            <button onclick="generateAudio()" id="audioBtn">ğŸµ éŸ³æ¥½ã‚’ç”Ÿæˆ</button>
            <div id="audioResult"></div>
        </div>

        <!-- Video -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸ¬</div>
                <div class="card-title">
                    <h2>å‹•ç”»ç”Ÿæˆ</h2>
                    <p>ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰çŸ­ã„å‹•ç”»ã‚’ä½œæˆ</p>
                </div>
            </div>

            <div class="form-group">
                <label>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</label>
                <textarea id="videoPrompt" placeholder="ä¾‹: ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒ¬ãƒˆãƒªãƒãƒ¼ãŒãƒ“ãƒ¼ãƒã§èµ°ã‚‹ã€å¤•æš®ã‚Œ">ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒ¬ãƒˆãƒªãƒãƒ¼ãŒå¹¸ã›ãã†ã«ãƒ“ãƒ¼ãƒã‚’èµ°ã‚‹ã€å¤•æš®ã‚Œæ™‚ã€ã‚¹ãƒ­ãƒ¼ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚·ãƒãƒãƒ†ã‚£ãƒƒã‚¯</textarea>
                <div class="sample-prompts">
                    <div class="sample-prompt" onclick="setVideoPrompt('æ¡œã®èŠ±ã³ã‚‰ãŒé¢¨ã«èˆã†ã€æ˜¥ã®å…¬åœ’ã€ã‚¹ãƒ­ãƒ¼ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³')">æ¡œ</div>
                    <div class="sample-prompt" onclick="setVideoPrompt('æ³¢ãŒç ‚æµœã«æ‰“ã¡å¯„ã›ã‚‹ã€é’ã„æµ·ã€ãƒªãƒ©ãƒƒã‚¯ã‚¹')">æµ·</div>
                    <div class="sample-prompt" onclick="setVideoPrompt('çŒ«ãŒã‚¸ãƒ£ãƒ³ãƒ—ã™ã‚‹ã€ã‚¹ãƒ­ãƒ¼ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã€å¯æ„›ã„')">çŒ«ã‚¸ãƒ£ãƒ³ãƒ—</div>
                </div>
            </div>

            <div class="form-group">
                <label>é•·ã• <span class="label-badge">ç”Ÿæˆæ™‚é–“: ç´„2-3åˆ†</span></label>
                <select id="videoDuration" onchange="updateVideoCredits()">
                    <option value="5">5ç§’ æ¨å¥¨</option>
                    <option value="10">10ç§’</option>
                </select>
                <div class="credits-info" id="videoCredits">ğŸ’° 50 credits</div>
            </div>

            <button onclick="generateVideo()" id="videoBtn">ğŸ¬ å‹•ç”»ã‚’ç”Ÿæˆ</button>
            <div id="videoResult"></div>
        </div>
    </div>

    <script>
        const API_BASE = 'https://api.chatweb.ai/api/v1/media';

        // Check login status
        async function checkLoginStatus() {
            const token = localStorage.getItem('auth_token');
            if (!token) {
                return false;
            }

            try {
                const response = await fetch('https://api.chatweb.ai/api/v1/auth/me', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                return response.ok;
            } catch {
                return false;
            }
        }

        window.addEventListener('load', async () => {
            const savedToken = localStorage.getItem('auth_token') || localStorage.getItem('test_auth_token');
            if (savedToken) {
                document.getElementById('authToken').value = savedToken;
            }

            // Check if user is logged in
            const isLoggedIn = await checkLoginStatus();
            if (!isLoggedIn) {
                showLoginPrompt();
            }
        });

        function showLoginPrompt() {
            const banner = document.createElement('div');
            banner.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                background: linear-gradient(135deg, var(--accent), #7c3aed);
                color: white;
                padding: 16px;
                text-align: center;
                z-index: 1000;
                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            `;
            banner.innerHTML = `
                <div style="max-width: 900px; margin: 0 auto;">
                    <strong>ğŸ” ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™</strong>
                    <span style="margin: 0 12px;">Â·</span>
                    <a href="https://chatweb.ai" style="color: white; text-decoration: underline; font-weight: 600;">
                        chatweb.ai ã«ãƒ­ã‚°ã‚¤ãƒ³
                    </a>
                    <span style="margin: 0 12px;">Â·</span>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 4px 12px; border-radius: 6px; cursor: pointer; font-size: 13px;">
                        é–‰ã˜ã‚‹
                    </button>
                </div>
            `;
            document.body.prepend(banner);
            document.querySelector('.main').style.marginTop = '80px';
        }

        function toggleTokenVisibility() {
            const input = document.getElementById('authToken');
            input.type = input.type === 'password' ? 'text' : 'password';
        }

        document.getElementById('authToken').addEventListener('change', (e) => {
            if (e.target.value.trim()) {
                localStorage.setItem('test_auth_token', e.target.value.trim());
            }
        });

        function setTTSText(text) {
            document.getElementById('ttsText').value = text;
        }

        function setImagePrompt(prompt) {
            document.getElementById('imagePrompt').value = prompt;
        }

        function setVideoPrompt(prompt) {
            document.getElementById('videoPrompt').value = prompt;
        }

        function setAudioPrompt(prompt) {
            document.getElementById('audioPrompt').value = prompt;
        }

        function updateAudioPrompts() {
            const type = document.getElementById('audioType').value;
            const samplesDiv = document.getElementById('audioSamples');

            if (type === 'music') {
                samplesDiv.innerHTML = `
                    <div class="sample-prompt" onclick="setAudioPrompt('ã‚¢ã‚³ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚®ã‚¿ãƒ¼ã‚’ä½¿ã£ãŸç©ã‚„ã‹ãªã‚«ãƒ•ã‚§ãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯ã€Lo-fiã€ãƒªãƒ©ãƒƒã‚¯ã‚¹')">ã‚«ãƒ•ã‚§BGM</div>
                    <div class="sample-prompt" onclick="setAudioPrompt('ã‚¢ãƒƒãƒ—ãƒ†ãƒ³ãƒãªã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ãƒ‹ãƒƒã‚¯ãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯ã€EDMã€ã‚¨ãƒãƒ«ã‚®ãƒƒã‚·ãƒ¥')">EDM</div>
                    <div class="sample-prompt" onclick="setAudioPrompt('ãƒ”ã‚¢ãƒã‚½ãƒ­ã€æ„Ÿå‹•çš„ã€æ˜ ç”»ã®ã‚ˆã†ãªã€ã‚†ã£ãã‚Š')">æ„Ÿå‹•ãƒ”ã‚¢ãƒ</div>
                    <div class="sample-prompt" onclick="setAudioPrompt('ã‚¸ãƒ£ã‚ºãƒˆãƒªã‚ªã€ã‚µãƒƒã‚¯ã‚¹ã€å¤œã®ãƒãƒ¼ã€ã‚¹ãƒ ãƒ¼ã‚º')">ã‚¸ãƒ£ã‚º</div>
                `;
                document.getElementById('audioPrompt').placeholder = 'ä¾‹: æ˜ã‚‹ã„ãƒ”ã‚¢ãƒæ›²ã€Lo-fi ãƒ’ãƒƒãƒ—ãƒ›ãƒƒãƒ—';
            } else {
                samplesDiv.innerHTML = `
                    <div class="sample-prompt" onclick="setAudioPrompt('ãƒ‰ã‚¢ãŒé–‰ã¾ã‚‹éŸ³')">ãƒ‰ã‚¢</div>
                    <div class="sample-prompt" onclick="setAudioPrompt('é›¨ã®éŸ³ã€é›·')">é›¨ã¨é›·</div>
                    <div class="sample-prompt" onclick="setAudioPrompt('é€šçŸ¥éŸ³ã€ãƒ”ã‚³ãƒ¼ãƒ³')">é€šçŸ¥éŸ³</div>
                    <div class="sample-prompt" onclick="setAudioPrompt('è¶³éŸ³ã€å»Šä¸‹ã‚’æ­©ã')">è¶³éŸ³</div>
                `;
                document.getElementById('audioPrompt').placeholder = 'ä¾‹: ãƒ‰ã‚¢ãŒé–‰ã¾ã‚‹éŸ³ã€é›¨ã®éŸ³';
            }
        }

        function updateAudioCredits() {
            const duration = document.getElementById('audioDuration').value;
            const credits = duration === '10' ? 30 : duration === '30' ? 80 : 150;
            document.getElementById('audioCredits').textContent = `ğŸ’° ${credits} credits`;
        }

        function updateImageCredits() {
            const model = document.getElementById('imageModel').value;
            const credits = {
                'flux-schnell': 5,
                'flux-pro': 15,
                'flux-realism': 10
            };
            document.getElementById('imageCredits').textContent = `ğŸ’° ${credits[model]} credits`;
        }

        function updateVideoCredits() {
            const duration = document.getElementById('videoDuration').value;
            const credits = duration === '5' ? 50 : 100;
            document.getElementById('videoCredits').textContent = `ğŸ’° ${credits} credits`;
        }

        async function generateTTS() {
            const btn = document.getElementById('ttsBtn');
            const resultDiv = document.getElementById('ttsResult');

            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span>éŸ³å£°ç”Ÿæˆä¸­...';
            resultDiv.innerHTML = '<div class="result">â³ éŸ³å£°ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™...</div>';

            try {
                const token = document.getElementById('authToken').value.trim();
                if (!token) {
                    throw new Error('èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                }

                const response = await fetch(`${API_BASE}/tts`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        text: document.getElementById('ttsText').value,
                        voice: document.getElementById('ttsVoice').value
                    })
                });

                if (!response.ok) {
                    throw new Error(await response.text());
                }

                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                const size = (blob.size / 1024).toFixed(1);

                resultDiv.innerHTML = `
                    <div class="result success">
                        <strong>âœ… éŸ³å£°ç”Ÿæˆå®Œäº†</strong>
                        <div class="result-content">
                            ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: ${size} KB
                            <audio controls src="${url}" autoplay></audio>
                            <a href="${url}" download="audio.mp3" class="download-btn">ğŸ’¾ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</a>
                        </div>
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="result error">
                        <strong>âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</strong>
                        <div class="result-content">${error.message}</div>
                    </div>
                `;
            } finally {
                btn.disabled = false;
                btn.innerHTML = 'ğŸ”Š éŸ³å£°ã‚’ç”Ÿæˆ';
            }
        }

        async function apiCall(endpoint, data) {
            const token = document.getElementById('authToken').value.trim();
            if (!token) {
                throw new Error('èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
            }

            const response = await fetch(`${API_BASE}${endpoint}`, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            if (!response.ok) {
                const text = await response.text();
                throw new Error(text || `HTTP ${response.status}`);
            }

            return response.json();
        }

        async function generateImage() {
            const btn = document.getElementById('imageBtn');
            const resultDiv = document.getElementById('imageResult');

            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span>ç”»åƒç”Ÿæˆä¸­ (30-60ç§’)...';
            resultDiv.innerHTML = '<div class="result">â³ ç”»åƒã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚å°‘ã€…ãŠå¾…ã¡ãã ã•ã„...</div>';

            try {
                const data = await apiCall('/image', {
                    prompt: document.getElementById('imagePrompt').value,
                    model: document.getElementById('imageModel').value,
                    size: document.getElementById('imageSize').value
                });

                const imageUrl = data.images[0].url;

                resultDiv.innerHTML = `
                    <div class="result success">
                        <strong>âœ… ç”»åƒç”Ÿæˆå®Œäº†</strong>
                        <div class="result-content">
                            ãƒ¢ãƒ‡ãƒ«: ${data.model} | ä½¿ç”¨ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ: ${data.credits_used}
                            <img src="${imageUrl}" alt="ç”Ÿæˆã•ã‚ŒãŸç”»åƒ" class="generated-image">
                            <a href="${imageUrl}" target="_blank" class="download-btn">ğŸ”— ãƒ•ãƒ«ã‚µã‚¤ã‚ºã§é–‹ã</a>
                        </div>
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="result error">
                        <strong>âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</strong>
                        <div class="result-content">${error.message}</div>
                    </div>
                `;
            } finally {
                btn.disabled = false;
                btn.innerHTML = 'ğŸ–¼ï¸ ç”»åƒã‚’ç”Ÿæˆ';
            }
        }

        async function generateAudio() {
            const btn = document.getElementById('audioBtn');
            const resultDiv = document.getElementById('audioResult');

            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span>éŸ³æ¥½ç”Ÿæˆä¸­ (60-90ç§’)...';
            resultDiv.innerHTML = '<div class="result">â³ éŸ³æ¥½ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚å°‘ã€…ãŠå¾…ã¡ãã ã•ã„...</div>';

            try {
                const token = document.getElementById('authToken').value.trim();
                if (!token) {
                    throw new Error('èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                }

                const type = document.getElementById('audioType').value;
                const duration = parseInt(document.getElementById('audioDuration').value);

                // Call music generation API (to be implemented)
                const response = await fetch(`${API_BASE}/music`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        prompt: document.getElementById('audioPrompt').value,
                        type: type,
                        duration: duration
                    })
                });

                if (!response.ok) {
                    throw new Error(await response.text());
                }

                const data = await response.json();

                if (data.audio_url) {
                    resultDiv.innerHTML = `
                        <div class="result success">
                            <strong>âœ… éŸ³æ¥½ç”Ÿæˆå®Œäº†</strong>
                            <div class="result-content">
                                ã‚¿ã‚¤ãƒ—: ${type === 'music' ? 'éŸ³æ¥½' : 'åŠ¹æœéŸ³'} | ä½¿ç”¨ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ: ${data.credits_used}
                                <audio controls src="${data.audio_url}" autoplay></audio>
                                <a href="${data.audio_url}" download="audio.mp3" class="download-btn">ğŸ’¾ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</a>
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                // If endpoint not implemented yet, show coming soon message
                if (error.message.includes('404') || error.message.includes('Not Found')) {
                    resultDiv.innerHTML = `
                        <div class="result" style="background: #e3f2fd; border-left: 4px solid #2196f3;">
                            <strong>ğŸš§ ã“ã®æ©Ÿèƒ½ã¯æº–å‚™ä¸­ã§ã™</strong>
                            <div class="result-content">
                                éŸ³æ¥½ãƒ»åŠ¹æœéŸ³ç”Ÿæˆæ©Ÿèƒ½ã¯ç¾åœ¨é–‹ç™ºä¸­ã§ã™ã€‚<br>
                                è¿‘æ—¥ä¸­ã«ãƒªãƒªãƒ¼ã‚¹äºˆå®šã§ã™ï¼ãŠæ¥½ã—ã¿ã«ã€‚<br><br>
                                <small>åˆ©ç”¨å¯èƒ½ã«ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹: Suno AI, Stable Audio</small>
                            </div>
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <div class="result error">
                            <strong>âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</strong>
                            <div class="result-content">${error.message}</div>
                        </div>
                    `;
                }
            } finally {
                btn.disabled = false;
                btn.innerHTML = 'ğŸµ éŸ³æ¥½ã‚’ç”Ÿæˆ';
            }
        }

        async function generateVideo() {
            const btn = document.getElementById('videoBtn');
            const resultDiv = document.getElementById('videoResult');

            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span>å‹•ç”»ç”Ÿæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ä¸­...';
            resultDiv.innerHTML = '<div class="result">â³ å‹•ç”»ç”Ÿæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¦ã„ã¾ã™...</div>';

            try {
                const data = await apiCall('/video', {
                    prompt: document.getElementById('videoPrompt').value,
                    duration: parseInt(document.getElementById('videoDuration').value),
                    mode: 'standard'
                });

                if (data.video_id) {
                    resultDiv.innerHTML = `
                        <div class="result success">
                            <strong>âœ… å‹•ç”»ç”Ÿæˆã‚’é–‹å§‹ã—ã¾ã—ãŸ</strong>
                            <div class="result-content">
                                å‹•ç”»ID: ${data.video_id}<br>
                                ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${data.status}<br>
                                æ¨å®šå®Œäº†æ™‚é–“: ç´„${data.estimated_time}ç§’<br>
                                ä½¿ç”¨ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ: ${data.credits_used}<br><br>
                                <div id="videoStatus_${data.video_id}">â³ å‡¦ç†ä¸­... 15ç§’å¾Œã«è‡ªå‹•ã§ç¢ºèªã—ã¾ã™</div>
                            </div>
                        </div>
                    `;

                    setTimeout(() => checkVideoStatus(data.video_id), 15000);
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="result error">
                        <strong>âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</strong>
                        <div class="result-content">${error.message}</div>
                    </div>
                `;
            } finally {
                btn.disabled = false;
                btn.innerHTML = 'ğŸ¬ å‹•ç”»ã‚’ç”Ÿæˆ';
            }
        }

        async function checkVideoStatus(videoId) {
            const statusDiv = document.getElementById(`videoStatus_${videoId}`);
            const token = document.getElementById('authToken').value.trim();

            try {
                const response = await fetch(`${API_BASE}/video/${videoId}`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });

                const data = await response.json();

                if (data.status === 'completed' && data.url) {
                    statusDiv.innerHTML = `
                        <strong>ğŸ‰ å‹•ç”»ç”Ÿæˆå®Œäº†ï¼</strong><br><br>
                        ${data.thumbnail_url ? `<img src="${data.thumbnail_url}" alt="ã‚µãƒ ãƒã‚¤ãƒ«" style="max-width: 100%; border-radius: 8px; margin-bottom: 10px;">` : ''}
                        <br><a href="${data.url}" target="_blank" class="download-btn">ğŸ¬ å‹•ç”»ã‚’å†ç”Ÿ</a>
                    `;
                } else if (data.status === 'processing' || data.status === 'queued') {
                    statusDiv.innerHTML = `â³ å‡¦ç†ä¸­ (${data.status})... 15ç§’å¾Œã«å†ç¢ºèªã—ã¾ã™`;
                    setTimeout(() => checkVideoStatus(videoId), 15000);
                } else if (data.status === 'failed') {
                    statusDiv.innerHTML = `<strong>âŒ å‹•ç”»ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ</strong>`;
                }
            } catch (error) {
                statusDiv.innerHTML = `<strong>âŒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèªã‚¨ãƒ©ãƒ¼: ${error.message}</strong>`;
            }
        }
    </script>
</body>
</html>
