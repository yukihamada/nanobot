<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>nanobot - AIチャット</title>
  <meta name="description" content="AIとすぐに話せる。LINE・Telegramでも使える。無料。">
  <style>
    :root {
      --bg: #0a0a0a;
      --surface: #141414;
      --border: #1e1e1e;
      --text: #e5e5e5;
      --muted: #777;
      --accent: #6366f1;
      --accent-hover: #818cf8;
      --green: #22c55e;
      --line: #06C755;
      --tg: #2AABEE;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Hiragino Sans', 'Noto Sans JP', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    /* Nav - minimal */
    nav {
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo { font-size: 18px; font-weight: 700; letter-spacing: -0.5px; }
    .logo span { color: var(--accent); }
    .lang-sw {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 6px;
      overflow: hidden;
      display: flex;
    }
    .lang-sw button {
      background: none; border: none; color: var(--muted);
      padding: 4px 10px; font-size: 11px; font-weight: 600; cursor: pointer;
    }
    .lang-sw button.on { background: var(--accent); color: #fff; }

    /* Main layout */
    .main {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 24px 80px;
    }

    /* Hero - super simple */
    .hero {
      text-align: center;
      margin-bottom: 40px;
    }
    .hero h1 {
      font-size: 32px;
      font-weight: 800;
      letter-spacing: -1px;
      margin-bottom: 8px;
    }
    .hero p {
      color: var(--muted);
      font-size: 15px;
    }

    /* Chat widget */
    .chat-box {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
      margin-bottom: 32px;
    }
    .chat-messages {
      height: 320px;
      overflow-y: auto;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .msg {
      max-width: 80%;
      padding: 10px 14px;
      border-radius: 12px;
      font-size: 14px;
      line-height: 1.5;
      word-break: break-word;
    }
    .msg.bot {
      background: #1a1a2e;
      align-self: flex-start;
      border-bottom-left-radius: 4px;
    }
    .msg.user {
      background: var(--accent);
      color: #fff;
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }
    .msg.typing {
      background: #1a1a2e;
      align-self: flex-start;
      border-bottom-left-radius: 4px;
      color: var(--muted);
    }
    .msg.typing::after {
      content: '';
      animation: dots 1.5s infinite;
    }
    @keyframes dots {
      0%, 20% { content: '.'; }
      40% { content: '..'; }
      60%, 100% { content: '...'; }
    }
    .chat-input {
      display: flex;
      border-top: 1px solid var(--border);
    }
    .chat-input input {
      flex: 1;
      background: none;
      border: none;
      color: var(--text);
      padding: 16px 20px;
      font-size: 15px;
      outline: none;
    }
    .chat-input input::placeholder { color: var(--muted); }
    .chat-input button {
      background: none;
      border: none;
      color: var(--accent);
      padding: 16px 20px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
    }
    .chat-input button:hover { color: var(--accent-hover); }
    .chat-input button:disabled { color: var(--muted); cursor: default; }

    /* Channel buttons */
    .channels {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 40px;
    }
    .ch-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 16px;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      text-decoration: none;
      color: #fff;
      transition: transform 0.15s, opacity 0.15s;
    }
    .ch-btn:hover { transform: translateY(-2px); opacity: 0.9; }
    .ch-btn.line { background: var(--line); }
    .ch-btn.tg { background: var(--tg); }
    .ch-btn svg { flex-shrink: 0; }

    /* Info cards */
    .info {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 40px;
    }
    .info-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
    }
    .info-card .ic { font-size: 24px; margin-bottom: 8px; }
    .info-card h3 { font-size: 13px; margin-bottom: 4px; }
    .info-card p { font-size: 12px; color: var(--muted); }

    /* Footer */
    footer {
      text-align: center;
      padding: 24px;
      font-size: 12px;
      color: var(--muted);
    }
    footer a { color: var(--muted); }

    @media (max-width: 600px) {
      .hero h1 { font-size: 24px; }
      .channels { grid-template-columns: 1fr; }
      .info { grid-template-columns: 1fr; }
      .chat-messages { height: 260px; }
    }
  </style>
</head>
<body>
  <nav>
    <div class="logo"><span>nano</span>bot</div>
    <div class="lang-sw">
      <button onclick="setLang('ja')" id="l-ja">JA</button>
      <button onclick="setLang('en')" id="l-en">EN</button>
    </div>
  </nav>

  <div class="main">
    <div class="hero">
      <h1 id="t-title">AIと話してみよう</h1>
      <p id="t-sub">下のチャットですぐに試せます。無料。</p>
    </div>

    <!-- Live chat -->
    <div class="chat-box">
      <div class="chat-messages" id="messages">
        <div class="msg bot" id="t-welcome">こんにちは！何でも聞いてください。</div>
      </div>
      <div class="chat-input">
        <input type="text" id="input" placeholder="メッセージを入力..." data-ph-ja="メッセージを入力..." data-ph-en="Type a message..." autocomplete="off">
        <button onclick="send()" id="send-btn" data-ja="送信" data-en="Send">送信</button>
      </div>
    </div>

    <!-- Channel buttons -->
    <div class="channels">
      <a href="https://line.me/R/ti/p/" class="ch-btn line" target="_blank">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 2C6.48 2 2 5.81 2 10.5c0 4.01 3.44 7.37 8.09 8.25.31.07.74.21.85.48.1.25.06.63.03.88l-.14.82c-.04.25-.2.96.84.52s5.58-3.29 7.61-5.63C21.31 13.51 22 12.07 22 10.5 22 5.81 17.52 2 12 2z" fill="#fff"/></svg>
        <span id="t-line">LINEで使う</span>
      </a>
      <a href="https://t.me/" class="ch-btn tg" target="_blank">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 0C5.37 0 0 5.37 0 12s5.37 12 12 12 12-5.37 12-12S18.63 0 12 0zm5.53 8.15l-1.88 8.85c-.14.63-.51.78-.84.49l-2.31-1.7-1.79 1.72c-.2.2-.36.36-.74.36l.27-3.78 6.88-6.22c.3-.27-.07-.42-.47-.16L8.09 13.29l-2.61-.82c-.57-.18-.58-.57.12-.84l11.03-4.27c.47-.17.88.11.73.79h.17z" fill="#fff"/></svg>
        <span id="t-tg">Telegramで使う</span>
      </a>
    </div>

    <!-- Simple info -->
    <div class="info">
      <div class="info-card">
        <div class="ic">&#x26A1;</div>
        <h3 id="t-i1">無料</h3>
        <p id="t-i1d">登録不要ですぐに使える</p>
      </div>
      <div class="info-card">
        <div class="ic">&#x1F916;</div>
        <h3 id="t-i2">賢い</h3>
        <p id="t-i2d">GPT-4o / Claude / Gemini</p>
      </div>
      <div class="info-card">
        <div class="ic">&#x1F4AC;</div>
        <h3 id="t-i3">どこでも</h3>
        <p id="t-i3d">LINE・Telegram・Web</p>
      </div>
    </div>
  </div>

  <footer>
    <a href="https://github.com/yukihamada/nanobot" target="_blank">GitHub</a> &middot;
    <a href="mailto:hello@chatweb.ai">Contact</a> &middot;
    nanobot &copy; 2025-2026
  </footer>

  <script>
    const API = location.hostname === 'localhost' ? 'http://localhost:3000' : '';
    const msgs = document.getElementById('messages');
    const input = document.getElementById('input');

    input.addEventListener('keydown', e => { if (e.key === 'Enter' && !e.isComposing) send(); });

    async function send() {
      const text = input.value.trim();
      if (!text) return;
      input.value = '';
      addMsg(text, 'user');

      const typing = document.createElement('div');
      typing.className = 'msg typing';
      typing.textContent = '...';
      msgs.appendChild(typing);
      msgs.scrollTop = msgs.scrollHeight;

      try {
        const r = await fetch(API + '/api/v1/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: text }),
        });
        const d = await r.json();
        typing.remove();
        addMsg(d.response, 'bot');
      } catch {
        typing.remove();
        const lang = document.documentElement.lang;
        addMsg(lang === 'ja' ? 'エラーが発生しました。もう一度お試しください。' : 'Something went wrong. Please try again.', 'bot');
      }
    }

    function addMsg(text, who) {
      const d = document.createElement('div');
      d.className = 'msg ' + who;
      d.textContent = text;
      msgs.appendChild(d);
      msgs.scrollTop = msgs.scrollHeight;
    }

    // i18n
    const T = {
      ja: {
        title: 'AIと話してみよう',
        sub: '下のチャットですぐに試せます。無料。',
        welcome: 'こんにちは！何でも聞いてください。',
        line: 'LINEで使う',
        tg: 'Telegramで使う',
        i1: '無料', i1d: '登録不要ですぐに使える',
        i2: '賢い', i2d: 'GPT-4o / Claude / Gemini',
        i3: 'どこでも', i3d: 'LINE・Telegram・Web',
      },
      en: {
        title: 'Chat with AI',
        sub: 'Try it right here. Free.',
        welcome: 'Hi! Ask me anything.',
        line: 'Use on LINE',
        tg: 'Use on Telegram',
        i1: 'Free', i1d: 'No sign-up required',
        i2: 'Smart', i2d: 'GPT-4o / Claude / Gemini',
        i3: 'Anywhere', i3d: 'LINE, Telegram, Web',
      }
    };
    function setLang(l) {
      document.documentElement.lang = l;
      localStorage.setItem('nl', l);
      document.getElementById('l-ja').className = l === 'ja' ? 'on' : '';
      document.getElementById('l-en').className = l === 'en' ? 'on' : '';
      const t = T[l];
      document.getElementById('t-title').textContent = t.title;
      document.getElementById('t-sub').textContent = t.sub;
      document.getElementById('t-welcome').textContent = t.welcome;
      document.getElementById('t-line').textContent = t.line;
      document.getElementById('t-tg').textContent = t.tg;
      document.getElementById('t-i1').textContent = t.i1;
      document.getElementById('t-i1d').textContent = t.i1d;
      document.getElementById('t-i2').textContent = t.i2;
      document.getElementById('t-i2d').textContent = t.i2d;
      document.getElementById('t-i3').textContent = t.i3;
      document.getElementById('t-i3d').textContent = t.i3d;
      input.placeholder = l === 'ja' ? 'メッセージを入力...' : 'Type a message...';
      document.getElementById('send-btn').textContent = l === 'ja' ? '送信' : 'Send';
    }
    setLang(localStorage.getItem('nl') || (navigator.language.startsWith('ja') ? 'ja' : 'en'));
  </script>
</body>
</html>
